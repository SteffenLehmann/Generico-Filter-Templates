{"key":"Collapsible","name":"Collapsible Button","instructions":"How to: https://tinyurl.com/CollapsibleButtonAAU","requirecss":"","requirejs":"","shim":"","defaults":"","amd":"1","body":"<div class=\"TemplateContainerCollapsible\">\n    <details id=\"Details@@AUTOID@@\" class=\"detailsStyle\" closed=\"\">\n    <summary id=\"detailsButton@@AUTOID@@\" class=\"detailsCollapsible\" tabindex=\"0\">@@Name@@</summary>\n    <div class=\"Indent\">\n        <div id=\"closeButtonCollapsible@@AUTOID@@\" class=\"closeButtonCollapsible\"></div>\n        <div class=\"WrapControlCollapsible\">\n            <div>","bodyend":"            </div>\n        </div>\n    </div>\n    </details>\n</div>","script":"const details = document.getElementById('Details'+@@AUTOID@@);\nconst detailsButton = document.getElementById('detailsButton'+@@AUTOID@@);\n\n// check the background color of the page\nlet previouisBackgroundColor = getBackgroundColor();\nsetBackgrounColor(previouisBackgroundColor);\n\n// event listener for the details element state change\ndetails.addEventListener(\"toggle\", (event) => {\n  toggleDetails();\n});\n\nfunction toggleDetails() {\n  if (details.open) {\n    /* the element was toggled open */\n    detailsButton.style.color = \"#468ff4\";\n    detailsButton.style.backgroundColor = \"#CCCCCC\";\n  } else {\n    /* the element was toggled closed */\n    detailsButton.style.backgroundColor = \"\";\n    detailsButton.style.color = \"\";\n  }\n}\n\n// function to get the background color of the page\nfunction getBackgroundColor() {\n  const bodyElement = document.body;\n  const computedStyle = window.getComputedStyle(bodyElement);\n  const backgroundColor = computedStyle.backgroundColor;\n\n  return backgroundColor;\n}\n\nfunction setBackgrounColor(backGroundColor) {   \n  if (backGroundColor == \"rgb(255, 255, 255)\") {\n    if (detailsButton.classList.contains(\"detailsCollapsible\")) {\n      return;\n    }\n    // Light mode\n    detailsButton.classList.add(\"detailsCollapsible\");\n    detailsButton.classList.remove(\"detailsCollapsibleDarkMode\");\n  } else if (backGroundColor == \"rgb(25, 26, 30)\") {\n    if (detailsButton.classList.contains(\"detailsCollapsibleDarkMode\")) {\n      return;\n    }\n    // Dark mode\n    detailsButton.classList.add(\"detailsCollapsibleDarkMode\");\n    detailsButton.classList.remove(\"detailsCollapsible\");\n  }\n}\n\n// custom event to check the background color of the page\nfunction checkBackgroundColor() {\n  const currentBackgroundColor = getBackgroundColor();\n  if (currentBackgroundColor !== previouisBackgroundColor) {\n    previouisBackgroundColor = currentBackgroundColor;\n    // Trigger the custom event\n    const event = new CustomEvent(\"backgroundColorChanged\", {\n      detail: currentBackgroundColor,\n    });\n    document.dispatchEvent(event);\n  }\n}\n// listen interval for the background color event\nsetInterval(checkBackgroundColor, 500);\n\n// event listener for the background color change\ndocument.addEventListener(\"backgroundColorChanged\", (event) => {\n  const newBackgroundColor = event.detail;\n  setBackgrounColor(newBackgroundColor);\n});\n\n\nconst closeButton = document.getElementById('closeButtonCollapsible'+@@AUTOID@@)\ncloseButton.addEventListener(\"click\", function(){ \n  details.removeAttribute(\"open\");\n});","style":"","dataset":"","datasetvars":"","alternate":"","alternateend":"","version":"1.4.18"}