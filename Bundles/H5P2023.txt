{"key":"H5P2023","name":"H5P Interactive content","instructions":"How to: https://tinyurl.com/H5PAAU","requirecss":"","requirejs":"","shim":"","defaults":"","amd":"1","body":"<div class=\"TemplateContainerH5P\" id=\"TemplateContainer@@AUTOID@@\" style=\"padding-left: 0;\">\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\" as=\"style\" style=\"margin-left: auto;\">\n  <div id=\"HeaderContainer@@AUTOID@@\" class=\"HeaderLinkContainerH5P\" style=\"padding-left: 0;\">\n    <details id=\"Details@@AUTOID@@\" closed=\"\">\n      <summary id=\"detailsButton@@AUTOID@@\" class=\"detailsCollapsibleH5P\"></summary>\n      <div id=\"iframeContainer@@AUTOID@@\" class=\"present_wrapperH5P\" style=\"padding-left: 0;\">\n        <div id=\"stateIndicator@@AUTOID@@\" class=\"stateIndicatorH5P\"></div>\n        <iframe id=\"Content@@AUTOID@@\" class=\"IframeStyleH5P\" src=\"\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allow=\"camera;microphone;geolocation\" as=\"style\" ></iframe>\n      </div>\n      <div class=\"Link-containerH5P\" id=\"Link-container@@AUTOID@@\">\n        <a id=\"ShareLink@@AUTOID@@\" href=\"\" target=\"_blank\" class=\"LinkH5P\" as=\"style\" aria-label=\"Open content in a new tab\" style=\"margin-left: auto;\"><i class=\"fas fa-external-link-alt\"></i> Link</a>\n      </div>\n    </details>\n  <a id=\"ShareLinkHeader@@AUTOID@@\" href=\"\" target=\"_blank\" class=\"HeaderLinkH5P\" as=\"style\" aria-label=\"Open content in a new tab\"><i class=\"fas fa-external-link-alt\"></i></a>\n  </div>\n</div>\n<script>\nwindow.onload = function(){}\n</script>","bodyend":"","script":"// Custom JS\n// user input from Moodle\nconst nameForSummary = getLongInput('@@Name: The name of the button that will contain the H5P activity content@@', 'Name: The name of the button that will contain the H5P activity content', opts);\nconst dURL = getLongInput('@@H5P Interactive content activity URL: the browser URL when you are in the Interactive content activity in Moodle@@', \"H5P Interactive content activity URL: the browser URL when you are in the Interactive content activity in Moodle\", opts);\n\n/* \n  function to get the user input from the generico object opts. \n  the original input and the bare input must be the same except for the @.\n*/\nfunction getLongInput(original, bare,  opts) {\n      bare = bare.replace(/\\s/g, \"\");\n      if (original === undefined) {\n            for(const obj_new of Object.keys(opts)) {\n                  const obj_sanitised = obj_new.replace(/\\s/g, \"\");\n                  if(bare == obj_sanitised) {\n                        return opts[obj_new];\n                  }\n            }\n      }\n      \n      return original;\n}\n\n// getting the elements from the HTML\nconst fullscreenIframeContainer = document.getElementById('iframeContainer'+@@AUTOID@@); \n//const fullscreenButton = document.getElementById('fullscreenButton'+@@AUTOID@@);\n//const exitFullscreenButton = document.getElementById('exitFullscreenButton'+@@AUTOID@@);\nconst details = document.getElementById('Details'+@@AUTOID@@);\nconst detailsButton = document.getElementById('detailsButton'+@@AUTOID@@);\nconst headerLink = document.getElementById('ShareLinkHeader'+@@AUTOID@@);\nconst link = document.getElementById('ShareLink'+@@AUTOID@@);\n\n\n// function calls to create the temlate on moodle\ncreateNameForSummary(nameForSummary);\nassignHeaderLinks(dURL);\n\n// check the background color of the page\nlet previouisBackgroundColor = getBackgroundColor();\nsetBackgrounColor(previouisBackgroundColor);\n\n//hideEnterFullscreenButtonOnPresentation(downloadURL[1]);\nonLoad(dURL, nameForSummary);\n\n\n\n// function to assign the header links\nfunction assignHeaderLinks(url) {\n      headerLink.href = \"\"+ url;\n}\n\n\n// creates the name for the template\nfunction createNameForSummary(name) {\n      if (name){\n            name =\"ðŸŽ¦ \"+ name; // you can add emoji to the summary title here, e.g. ðŸŽ¦\n            detailsButton.textContent = name; // set the name of the button containing the padlet board\n      } else if (!name){\n            const header = document.getElementById('HeaderContainer'+@@AUTOID@@).style.display = 'none';\n            assignParent('stateIndicator', 'iframeContainer', 'Link-container', 'TemplateContainer');\n      }\n}\n\nfunction assignParent(stateIndicator, iframeContainer, linkContainer, templateContainer) {\n      const container = document.getElementById(templateContainer+@@AUTOID@@);\n      const MoveArray = [document.getElementById(stateIndicator+@@AUTOID@@), document.getElementById(iframeContainer+@@AUTOID@@), document.getElementById(linkContainer+@@AUTOID@@)];\n\n      for (let i = 0; i < MoveArray.length; i++) {\n            container.appendChild(MoveArray[i]);\n      }\n}\n// set the SameSite attribute for the cookies\nfunction setSameSiteAttribute(sameSiteValue) {\n      const cookies = document.cookie.split(\";\");\n    \n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        const [name, value] = cookie.split(\"=\");\n    \n        // Set the cookie with the desired SameSite attribute\n        document.cookie = `${name}=${value}; SameSite=${sameSiteValue}; Secure`;\n      }\n    }\n    \n// on load function e.g. when the Collapsible button is clicked\nfunction onLoad(url, nameForSummary){\n      const embeddUrl = URLtoEmbedURL(url);\n      if (url && nameForSummary) {\n            document.getElementById('Details'+@@AUTOID@@).onclick= function() {\n                  assignContent(url, embeddUrl);\n            };\n      } else if (url && !nameForSummary) {\n            assignContent(url, embeddUrl);\n      }\n}\nfunction assignContent(url, embeddUrl) {\n      document.getElementById('Content'+@@AUTOID@@).src = \"\"+embeddUrl;\n      document.getElementById('ShareLink'+@@AUTOID@@).href = \"\"+ url;\n      // set the SameSite attribute for the cookies\n      setSameSiteAttribute('None');\n}\n\nfunction URLtoEmbedURL(URL) {\n      const embedURL = URL.replace('view.php', 'embed.php');\n      return embedURL;\n}\n/* // hide the enter fullscreen button on if the iframe is a presentation\nfunction hideEnterFullscreenButtonOnPresentation(type) {\n      if (type == 'presentation'){\n            fullscreenButton.style.display = 'none';\n      } \n} */\n\n\n// event listener for the details element state change\ndetails.addEventListener(\"toggle\", (event) => {\n      if (details.open) {\n        /* the element was toggled open */\n        detailsButton.style.color = '#3357c2';\n        detailsButton.style.backgroundColor = '#E1E1E1';\n        detailsButton.style.borderBottomRightRadius = '0px';\n        detailsButton.style.borderBottomLeftRadius = '0px';\n        headerLink.style.display = 'none';\n      } else {\n        /* the element was toggled closed */\n        detailsButton.style.backgroundColor = '';\n        detailsButton.style.color = '';\n        detailsButton.style.borderBottomRightRadius = '5px';\n        detailsButton.style.borderBottomLeftRadius = '5px';\n        headerLink.style.display = 'block';\n      }\n});\n    \n// function to get the background color of the page\nfunction getBackgroundColor() {\n      const bodyElement = document.body;\n      const computedStyle = window.getComputedStyle(bodyElement);\n      const backgroundColor = computedStyle.backgroundColor;\n\n      return backgroundColor;\n  }\n\nfunction setBackgrounColor(backGroundColor) {\n      if (backGroundColor == 'rgb(255, 255, 255)') {\n            if (detailsButton.classList.contains('detailsCollapsibleH5P')) {return;}\n            // Light mode\n            detailsButton.classList.add('detailsCollapsibleH5P');\n            detailsButton.classList.remove('detailsCollapsibleDarkModeH5P');\n            headerLink.classList.add('HeaderLinkH5P');\n            headerLink.classList.remove('HeaderLinkDarkModeH5P');\n            link.classList.add('LinkH5P');\n            link.classList.remove('LinkDarkModeH5P');\n            /* fullscreenButton.classList.add('LinkH5P');\n            fullscreenButton.classList.remove('LinkDarkModeH5P'); */\n      } else if (backGroundColor == 'rgb(25, 26, 30)') {\n            if (detailsButton.classList.contains('detailsCollapsibleDarkModeH5P')) {return;}\n            // Dark mode\n            detailsButton.classList.add('detailsCollapsibleDarkModeH5P');\n            detailsButton.classList.remove('detailsCollapsibleH5P');\n            headerLink.classList.add('HeaderLinkDarkModeH5P');\n            headerLink.classList.remove('HeaderLinkH5P');\n            link.classList.add('LinkDarkModeH5P');\n            link.classList.remove('LinkH5P');\n            /* fullscreenButton.classList.add('LinkDarkModeH5P');\n            fullscreenButton.classList.remove('LinkH5P'); */\n      }\n}\n\n// custom event to check the background color of the page\nfunction checkBackgroundColor() {\n      const currentBackgroundColor = getBackgroundColor();\n      if (currentBackgroundColor !== previouisBackgroundColor) {\n            previouisBackgroundColor = currentBackgroundColor;\n            // Trigger the custom event\n            const event = new CustomEvent('backgroundColorChanged', {detail: currentBackgroundColor});\n            document.dispatchEvent(event);\n      }\n}\n// listen interval for the background color event \nsetInterval(checkBackgroundColor, 500);\n\n// event listener for the background color change\ndocument.addEventListener('backgroundColorChanged', (event) => {\n      const newBackgroundColor = event.detail;\n      setBackgrounColor(newBackgroundColor);\n});\n\n // function to remove the iframe focus style\n function removeIframeFocus(element, nameForSummary) {\n      if (!nameForSummary) {\n            element.style.backgroundColor = \"transparent\";\n            return;\n      } else element.style.backgroundColor = \"#E1E1E1\";\n}\n// function to add the iframe focus style\nfunction addIframeFocus(element) {\n      //element.style.outline = '#f44646';\n      element.style.backgroundColor = \"#468ff4\";\n}\n\n//checks if the iframe has focus (fall back method)  \nwindow.setInterval(function() {\n      const iframeState = document.getElementById('stateIndicator'+@@AUTOID@@);\n      if (document.activeElement == document.getElementById('Content'+@@AUTOID@@)) {\n        addIframeFocus(iframeState);\n      } else {\n        removeIframeFocus(iframeState, nameForSummary);\n      }\n     }, 500);\n\n// prevent event probagation\nconst linkContainer = document.getElementById('Link-container'+@@AUTOID@@);\nlinkContainer.addEventListener('click', function(event) {\n      event.stopPropagation();\n}, false);\n\n\n  \n  // Call the adjustIframeSize function when the iframe's content is fully loaded\n//window.onload = adjustIframeSize;\n  \n// Call the adjustIframeSize function when the browser window is resized\n//window.addEventListener('resize', adjustIframeSize);\n\n// H5P iframe Resizer\n(function () {\n      if (!window.postMessage || !window.addEventListener || window.h5pResizerInitialized) {\n        return; // Not supported\n      }\n      window.h5pResizerInitialized = true;\n    \n      // Map actions to handlers\n      var actionHandlers = {};\n    \n      /**\n       * Prepare iframe resize.\n       *\n       * @private\n       * @param {Object} iframe Element\n       * @param {Object} data Payload\n       * @param {Function} respond Send a response to the iframe\n       */\n      actionHandlers.hello = function (iframe, data, respond) {\n        // Make iframe responsive\n        iframe.style.width = '75%';\n    \n        // Bugfix for Chrome: Force update of iframe width. If this is not done the\n        // document size may not be updated before the content resizes.\n        iframe.getBoundingClientRect();\n        \n        // Tell iframe that it needs to resize when our window resizes\n        var resize = function () {\n          if (iframe.contentWindow) {\n            // Limit resize calls to avoid flickering\n            respond('resize');\n          }\n          else {\n            // Frame is gone, unregister.\n            window.removeEventListener('resize', resize);\n          }\n        };\n        window.addEventListener('resize', resize, false);\n    \n        // Respond to let the iframe know we can resize it\n        respond('hello');\n      };\n    \n      /**\n       * Prepare iframe resize.\n       *\n       * @private\n       * @param {Object} iframe Element\n       * @param {Object} data Payload\n       * @param {Function} respond Send a response to the iframe\n       */\n      actionHandlers.prepareResize = function (iframe, data, respond) {\n        // Do not resize unless page and scrolling differs\n        if (iframe.clientHeight !== data.scrollHeight ||\n            data.scrollHeight !== data.clientHeight) {\n    \n          // Reset iframe height, in case content has shrinked.\n          iframe.style.height = data.clientHeight + 'px';\n          respond('resizePrepared');\n        }\n      };\n    \n      /**\n       * Resize parent and iframe to desired height.\n       *\n       * @private\n       * @param {Object} iframe Element\n       * @param {Object} data Payload\n       * @param {Function} respond Send a response to the iframe\n       */\n      actionHandlers.resize = function (iframe, data) {\n            // Resize iframe so all content is visible. Use scrollHeight to make sure we get everything\n            iframe.style.height = data.scrollHeight + 'px';\n      };\n    \n      /**\n       * Keyup event handler. Exits full screen on escape.\n       *\n       * @param {Event} event\n       */\n      var escape = function (event) {\n        if (event.keyCode === 27) {\n          exitFullScreen();\n        }\n      };\n    \n      // Listen for messages from iframes\n      window.addEventListener('message', function receiveMessage(event) {\n        if (event.data.context !== 'h5p') {\n          return; // Only handle h5p requests.\n        }\n    \n        // Find out who sent the message\n        var iframe, iframes = document.getElementsByTagName('iframe');\n        for (var i = 0; i < iframes.length; i++) {\n          if (iframes[i].contentWindow === event.source) {\n            iframe = iframes[i];\n            break;\n          }\n        }\n    \n        if (!iframe) {\n          return; // Cannot find sender\n        }\n    \n        // Find action handler handler\n        if (actionHandlers[event.data.action]) {\n          actionHandlers[event.data.action](iframe, event.data, function respond(action, data) {\n            if (data === undefined) {\n              data = {};\n            }\n            data.action = action;\n            data.context = 'h5p';\n            event.source.postMessage(data, event.origin);\n          });\n        }\n      }, false);\n    \n      // Let h5p iframes know we're ready!\n      var iframes = document.getElementsByTagName('iframe');\n      var ready = {\n        context: 'h5p',\n        action: 'ready'\n      };\n      for (var i = 0; i < iframes.length; i++) {\n        if (iframes[i].src.indexOf('h5p') !== -1) {\n          iframes[i].contentWindow.postMessage(ready, '*');\n        }\n      }\n    \n    })();\n    ","style":".TemplateContainerH5P {\n  width: 100%;\n  overflow: auto;\n}\n\n.detailsCollapsibleH5P {\n  pointer: cursor;\n  padding: 10px;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-family: \"Poppins\", sans-serif;\n  font-size: 1rem;\n  font-weight: 500;\n  line-height: 1.5;\n  color: #212121;\n  border-top-right-radius: 5px;\n  border-top-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  overflow: visible;\n  border: 2px solid transparent;\n}\n\n.detailsCollapsibleH5P:hover {\n  background-color: #E1E1E1;\n  color: #3357c2;\n}\n\n.detailsCollapsibleH5P:focus-visible {\n  outline: none;\n  border-color: #468ff4;\n}\n.detailsCollapsibleDarkModeH5P {\n  pointer: cursor;\n  padding: 10px;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-family: \"Poppins\", sans-serif;\n  font-size: 1rem;\n  font-weight: 500;\n  line-height: 1.5;\n  color: #ffffff;\n  border-top-right-radius: 5px;\n  border-top-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border: 2px solid transparent;\n}\n\n.detailsCollapsibleDarkModeH5P:hover {\n  background-color: #cccccc;\n  color: #468ff4;\n}\n\n.detailsCollapsibleDarkModeH5P:focus-visible {\n  outline: none;\n  border-color: #468ff4;\n}\n.present_wrapperH5P {\n  background-color: black;\n  display: flex;\n  justify-content: center; \n}\n\n.Link-containerH5P {\n  padding: 10px;\n  border-radius: 5px;\n  display: flex;\n}\n\n.LinkH5P {\n  display: block;\n  text-decoration: none;\n  padding: 5px 10px;\n  border: 1px solid #E1E1E1;\n  background-color: #E1E1E1;\n  border-radius: 5px; /* Rounded borders */\n  margin-bottom: 5px;\n  margin: 0 5px;\n  color: #131314;\n  font-size: 16px;\n  font-family: \"Poppins\", sans-serif;\n  font-weight: 400;\n  line-height: 1.6;\n}\n\n.LinkH5P:hover {\n  background-color: #b2b2b2;\n  border: 1px solid #b2b2b2;\n  color: #3357c2;\n}\n.LinkDarkModeH5P {\n  display: block;\n  text-decoration: none;\n  padding: 5px 10px;\n  border: transparent; \n  background-color: transparent;\n  border-radius: 5px; /* Rounded borders */\n  margin-bottom: 5px;\n  margin: 0 5px;\n  color: #ffffff !important;\n  font-size: 16px;\n  font-family: \"Poppins\", sans-serif;\n  font-weight: 400;\n  line-height: 1.6;\n}\n.LinkDarkModeH5P:hover {\n  background-color: #cccccc;\n  color: #468ff4 !important;;\n}\n.iframeButtonH5P {\n  display: none;\n  position: absolute;\n  bottom: 5px;\n  left: 5px;\n  display: block;\n  text-decoration: none;\n  padding: 5px 10px;\n  border: 1px solid #cccccc;\n  background-color: #cccccc;\n  border-radius: 5px; /* Rounded borders */\n  margin-bottom: 5px;\n  margin: 0 5px;\n  color: #131314;\n  font-size: 16px;\n  font-family: \"Poppins\", sans-serif;\n  font-weight: 400;\n  line-height: 1.5;\n}\n.iframeButtonH5P:hover {\n  background-color: #666666;\n  border: 1px solid #666666;\n  color: #468ff4;\n}\n\n.IframeStyleH5P {\n  height: 100%;\n}\n\n.stateIndicatorH5P{\n  height: 5px;\n  background-color: #E1E1E1;\n}\n\n.HeaderLinkH5P {\n  text-decoration: none;\n  padding: 10px;\n  border-radius: 5px; /* Rounded borders */\n  color: #212121;\n  font-size: 16px;\n  font-family: \"Poppins\", sans-serif;\n  font-weight: 400;\n  line-height: 1.6;\n  right: 0;\n  border: 2px solid transparent;\n}\n.HeaderLinkH5P:hover {\n  background-color: #E1E1E1;\n  color: #3357c2;\n}\n.HeaderLinkH5P:focus-visible {\n  outline: none;\n  border-color: #468ff4;\n}\n.HeaderLinkDarkModeH5P {\n  text-decoration: none;\n  padding: 10px;\n  border-radius: 5px; /* Rounded borders */\n  color: #ffffff !important;\n  font-size: 16px;\n  font-family: \"Poppins\", sans-serif;\n  font-weight: 400;\n  line-height: 1.6;\n  right: 0;\n  border: 2px solid transparent;\n}\n.HeaderLinkDarkModeH5P:hover {\n  background-color: #cccccc;\n  color: #468ff4 !important;\n}\n.HeaderLinkDarkModeH5P:focus-visible {\n  outline: none;\n  border-color: #468ff4;\n}\n\n.HeaderLinkContainerH5P {\n  display: flex;\n  align-items: center;\n}\n.HeaderLinkContainerH5P > :first-child {\n  flex: 1;\n}\n","dataset":"","datasetvars":"","alternate":"","alternateend":"","version":"1.4.18"}