{"key":"Surveyxact2023","name":"SurveyXact","instructions":"How to: https://tinyurl.com/SurveyXactAAU","requirecss":"","requirejs":"","shim":"","defaults":"","amd":"1","body":"<div class=\"TemplateContainerSurveyXact\" style=\"padding-left: 0;\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\" as=\"style\" style=\"margin-left: auto;\">\n    <div id=\"HeaderContainer@@AUTOID@@\" class=\"HeaderLinkContainerSurveyXact\" style=\"padding-left: 0;\">\n        <details id=\"Details@@AUTOID@@\" closed=\"\">\n            <summary id=\"detailsButton@@AUTOID@@\" class=\"detailsCollapsibleSurveyXact\"></summary>\n            <div id=\"iframeContainer@@AUTOID@@\" class=\"present_wrapperSurveyXact\" style=\"padding-left: 0;\">\n                <button id=\"exitFullscreenButton@@AUTOID@@\" class=\"iframeButtonSurveyXact\" style=\"display: none;\"><i class= \"fas fa-expand\"></i> Exit </button>\n                <iframe id=\"Content@@AUTOID@@\" class=\"IframeStyleSurveyXact\" src=\"\" frameborder=\"0\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" allow=\"camera;microphone;geolocation\" as=\"style\" ></iframe>\n            </div>\n            <div class=\"Link-containerSurveyXact\">\n                <button id=\"fullscreenButton@@AUTOID@@\" class=\"LinkSurveyXact\"> <i class= \"fas fa-expand\"></i> Full-screen</button>\n                <a id=\"ShareLink@@AUTOID@@\" href=\"\" target=\"_blank\" class=\"LinkSurveyXact\" as=\"style\" style=\"margin-left: auto;\" aria-label=\"Open content in a new tab\"><i class=\"fas fa-external-link-alt\"></i> Link</a>\n            </div>\n        </details>\n        <a id=\"ShareLinkHeader@@AUTOID@@\" href=\"\" target=\"_blank\" class=\"HeaderLinkSurveyXact\" as=\"style\"><i class=\"fas fa-external-link-alt\" aria-label=\"Open content in a new tab\"></i></a>\n    </div>\n</div>\n<script>\nwindow.onload = function(){}\n</script>","bodyend":"","script":"// Custom JS\n// user input from Moodle\nconst nameForSummary = getLongInput('@@Name: The name of the button that will contain the survey@@','Name: The name of the button that will contain the survey', opts);\nconst url = getLongInput('@@SurveyXact URL: the distribution link of the survey@@', \"SurveyXact URL: the distribution link of the survey\", opts);\n\n/* \n  function to get the user input from the generico object opts. \n  the original input and the bare input must be the same except for the @.\n*/\nfunction getLongInput(original, bare,  opts) {\n  bare = bare.replace(/\\s/g, \"\");\n  if (original === undefined) {\n        for(const obj_new of Object.keys(opts)) {\n              const obj_sanitised = obj_new.replace(/\\s/g, \"\");\n              if(bare == obj_sanitised) {\n                    return opts[obj_new];\n              }\n        }\n  }\n  \n  return original;\n}\n// getting the elements from the HTML\nconst fullscreenIframeContainer = document.getElementById('iframeContainer'+@@AUTOID@@); \nconst fullscreenButton = document.getElementById('fullscreenButton'+@@AUTOID@@);\nconst exitFullscreenButton = document.getElementById('exitFullscreenButton'+@@AUTOID@@);\nconst details = document.getElementById('Details'+@@AUTOID@@);\nconst detailsButton = document.getElementById('detailsButton'+@@AUTOID@@);\nconst headerLink = document.getElementById('ShareLinkHeader'+@@AUTOID@@);\nconst sharelink = document.getElementById('ShareLink'+@@AUTOID@@);\n\n\n// function calls to create the temlate on moodle\ncreateNameForSummary(nameForSummary);\nassignHeaderLinks(url);\n\n// check the background color of the page\nlet previouisBackgroundColor = getBackgroundColor();\nsetBackgrounColor(previouisBackgroundColor);\n\nonLoad(url);\n\n// function to assign the header links\nfunction assignHeaderLinks(url) {\n  headerLink.href = \"\"+ url;\n}\n\n//creates the name for the template\nfunction createNameForSummary(name) {\n  if (typeof(name) != 'undefined') {\n    name = \"üìù \"+ name; // you can add emoji to the summary title here, e.g. üé¶\n    detailsButton.textContent = name; // set the name of the button containing the padlet board\n  } \n}\n\n// set the SameSite attribute for the cookies\nfunction setSameSiteAttribute(sameSiteValue) {\n  const cookies = document.cookie.split(\";\");\n\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const [name, value] = cookie.split(\"=\");\n\n    // Set the cookie with the desired SameSite attribute\n    document.cookie = `${name}=${value}; SameSite=${sameSiteValue}; Secure`;\n  }\n}\n\n// on load function e.g. when the Collapsible button is clicked\nfunction onLoad(url){\n    if(typeof(url) != 'undefined'){\n        document.getElementById('Details'+@@AUTOID@@).onclick= function() {\n            document.getElementById('Content'+@@AUTOID@@).src = \"\"+url;\n            document.getElementById('ShareLink'+@@AUTOID@@).href = \"\"+url;\n            setSameSiteAttribute('None');\n        };\n    }\n}\n// event listener for the details element state change\ndetails.addEventListener(\"toggle\", (event) => {\n    if (details.open) {\n      /* the element was toggled open */\n      detailsButton.style.color = '#468ff4';\n      detailsButton.style.backgroundColor = '#CCCCCC';\n      detailsButton.style.borderBottomRightRadius = '0px';\n      detailsButton.style.borderBottomLeftRadius = '0px';\n      headerLink.style.display = 'none';\n    } else {\n      /* the element was toggled closed */\n      detailsButton.style.backgroundColor = '';\n      detailsButton.style.color = '';\n      detailsButton.style.borderBottomRightRadius = '5px';\n      detailsButton.style.borderBottomLeftRadius = '5px';\n      headerLink.style.display = 'block';\n    }\n  });\n  \n  // hide exit fullscreen button\n  function hideFullscreenExitButton() {\n    exitFullscreenButton.style.display = 'none';\n  }\n  \n  // show exit fullscreen button\n  function showFullscreenExitButton() {\n    exitFullscreenButton.style.display = 'block';\n  }\n  \n  // Event listener for the fullscreen button\n  fullscreenButton.addEventListener('click', enterFullscreen);\n  \n  // Function to enter fullscreen\n  function enterFullscreen() {\n    if (fullscreenIframeContainer.requestFullscreen) {\n      fullscreenIframeContainer.requestFullscreen();\n    } else if (fullscreenIframeContainer.mozRequestFullScreen) {\n      fullscreenIframeContainer.mozRequestFullScreen();\n    } else if (fullscreenIframeContainer.webkitRequestFullscreen) {\n      fullscreenIframeContainer.webkitRequestFullscreen();\n    } else if (fullscreenIframeContainer.msRequestFullscreen) {\n      fullscreenIframeContainer.msRequestFullscreen();\n    }\n  }\n  \n  // Function to exit fullscreen\n  function exitFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen();\n    }\n  }\n  \n  // Listen for fullscreen change event\n  document.addEventListener('fullscreenchange', handleFullscreenChange);\n  document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\n  document.addEventListener('mozfullscreenchange', handleFullscreenChange);\n  document.addEventListener('MSFullscreenChange', handleFullscreenChange);\n  \n  // Handle the fullscreen change event to hide/show the exit fullscreen button\n  function handleFullscreenChange() {\n    if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {\n      // If the iframe enters fullscreen\n      showFullscreenExitButton();\n    } else {\n      // If the iframe exits fullscreen\n      hideFullscreenExitButton();\n    }\n  }\n  \n  // Event listener for the exit fullscreen button\n  exitFullscreenButton.addEventListener('click', () => {\n    exitFullscreen();\n  });\n\n// function to get the background color of the page\nfunction getBackgroundColor() {\n  const bodyElement = document.body;\n  const computedStyle = window.getComputedStyle(bodyElement);\n  const backgroundColor = computedStyle.backgroundColor;\n\n  return backgroundColor;\n}\n\nfunction setBackgrounColor(backGroundColor) {\n  if (backGroundColor == 'rgb(255, 255, 255)') {\n        if (detailsButton.classList.contains('detailsCollapsibleSurveyXact')) {return;}\n        // Light mode\n        detailsButton.classList.add('detailsCollapsibleSurveyXact');\n        detailsButton.classList.remove('detailsCollapsibleDarkModeSurveyXact');\n        headerLink.classList.add('HeaderLinkSurveyXact');\n        headerLink.classList.remove('HeaderLinkDarkModeSurveyXact');\n        sharelink.classList.add('LinkSurveyXact');\n        sharelink.classList.remove('LinkDarkModeSurveyXact');\n        fullscreenButton.classList.add('LinkSurveyXact');\n        fullscreenButton.classList.remove('LinkDarkModeSurveyXact');\n  } else if (backGroundColor == 'rgb(25, 26, 30)') {\n        if (detailsButton.classList.contains('detailsCollapsibleDarkModeSurveyXact')) {return;}\n        // Dark mode\n        detailsButton.classList.add('detailsCollapsibleDarkModeSurveyXact');\n        detailsButton.classList.remove('detailsCollapsibleSurveyXact');\n        headerLink.classList.add('HeaderLinkDarkModeSurveyXact');\n        headerLink.classList.remove('HeaderLinkSurveyXact');\n        sharelink.classList.add('LinkDarkModeSurveyXact');\n        sharelink.classList.remove('LinkSurveyXact');\n        fullscreenButton.classList.add('LinkDarkModeSurveyXact');\n        fullscreenButton.classList.remove('LinkSurveyXact');\n  }\n}\n\n// custom event to check the background color of the page\nfunction checkBackgroundColor() {\n  const currentBackgroundColor = getBackgroundColor();\n  if (currentBackgroundColor !== previouisBackgroundColor) {\n        previouisBackgroundColor = currentBackgroundColor;\n        // Trigger the custom event\n        const event = new CustomEvent('backgroundColorChanged', {detail: currentBackgroundColor});\n        document.dispatchEvent(event);\n  }\n}\n// listen interval for the background color event \nsetInterval(checkBackgroundColor, 500);\n\n// event listener for the background color change\ndocument.addEventListener('backgroundColorChanged', (event) => {\n  const newBackgroundColor = event.detail;\n  setBackgrounColor(newBackgroundColor);\n});\n","style":"","dataset":"","datasetvars":"","alternate":"","alternateend":"","version":"1.4.18"}