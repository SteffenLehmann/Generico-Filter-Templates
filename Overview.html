<div id="gridContainer" style="margin-left: 15px; margin-right: 15px; width: 100%;">
    <div class="card-deck" style="margin-left: 15px; margin-right: 15px; display: flex; flex-wrap: wrap !important; overflow: hidden; justify-content: center;">
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5674/mod_resource/content/1/Intro.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Introduction</h5>
                <p class="card-text">The issue with Moodle</p>
                <p class="card-text">The purpose of the course</p>
                <p class="card-text">Learn more about Moodle</p>
                <p class="card-text">Annoucements</p>
                <p class="card-text" >Discussion</p>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5675/mod_resource/content/1/Templates%282%29.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Course Blueprint</h5>
                <p class="card-text">Why use them</p>
                <p class="card-text">How to use them</p>
                <p class="card-text" style="margin-bottom: 0;">Provided Blueprint</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Traditional course</li>
                    <li class="card-text">Semester room</li>
                    <li class="card-text">Flipped classroom</li>
                    <li class="card-text">Self-study course</li>
                </ul> 
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5676/mod_resource/content/1/Course%20formats.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Organizing Moodle</h5>
                <p class="card-text" style="margin-bottom: 0;">Course structure</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Overview</li>
                    <li class="card-text">Pros and cons</li>
                    <li class="card-text">How to set up Edit and collapse text, video, and audio</li>
                    <li class="card-text">Text and Media Area</li>
                    <li class="card-text">Summary</li>
                    <li class="card-text">Collapsible button</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Hid content Track and control student progress</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Activity completion</li>
                    <li class="card-text">Access restriction</li>
                </ul>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5677/mod_resource/content/1/Teaching_activities.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Teaching material</h5>
                <p class="card-text" style="margin-bottom: 0;">Single text file</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">File activity</li>
                    <li class="card-text">PDF embed</li>
                    <li class="card-text">Google Docs</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Folder with files</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Folder activity</li>
                    <li class="card-text">Google folder</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Embed presentation</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">PowerPoint</li>
                    <li class="card-text">Google Slides</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Embed video and audio</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Panopto</li>
                    <li class="card-text">YouTube</li>
                    <li class="card-text">Interactable H5P</li>
                    <li class="card-text">Spodify</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Link to external sources</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">URL (Moodle)</li>
                    <li class="card-text">Website embed</li>
                </ul>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5678/mod_resource/content/1/Feedback.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Communication</h5>
                <p class="card-text" style="margin-bottom: 0;">Teacher to student</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Forum</li>
                    <li class="card-text">Reengagement</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Student to teacher</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Feedback</li>
                    <li class="card-text">SurveyXact</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Student to student</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Peer review</li>
                </ul>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5679/mod_resource/content/2/Creative%20tools.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Creative tools</h5>
                <p class="card-text">Miro</p>
                <p class="card-text">Google Edit</p>
                <p class="card-text">AnswerGarden</p>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5680/mod_resource/content/1/Running%20quizzes%281%29.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">Quiz and exams</h5>
                <p class="card-text" style="margin-bottom: 0;">Single/group assignment</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Group self-selection</li>
                    <li class="card-text">Assignement</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;">Quizzes in Moodle</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Inspiration</li>
                    <li class="card-text">How quizzes work conceptually</li>
                    <li class="card-text">Question Bank</li>
                    <li class="card-text">Quiz</li>
                    <li class="card-text">JazzQuiz</li>
                </ul>
                <p class="card-text" style="margin-bottom: 0;"> Award micro-credential</p>
                <ul style="margin-bottom: 2px;">
                    <li class="card-text">Intro to micro-credentials</li>
                </ul>
            </div>
        </div>
        <div class="card">
            <img class="card-img-top" src="https://hk.moodle.aau.dk/pluginfile.php/5681/mod_resource/content/2/GDPR.png" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title">GDPR and consent</h5>
                <p class="card-text">Third-party platforms</p>
                <p class="card-text">Third-party platforms Guidelines for educators</p>
                <p class="card-text">Guidelines for students</p>
                <p class="card-text">Consent form</p>
            </div>
        </div>
    </div>    
</div>

<div id="tab">	
    <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="Introduction-tab" data-toggle="tab" href="#introduction" role="tab" aria-controls="home" aria-selected="true">Introduction</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="Courseblueprints-tab" data-toggle="tab" href="#Courseblueprints" role="tab" aria-controls="profile" aria-selected="false">Course blueprints</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="OrganizingMoodle-tab" data-toggle="tab" href="#OrganizingMoodle" role="tab" aria-controls="contact" aria-selected="false">Organizing Moodle</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="Teachingmaterial-tab" data-toggle="tab" href="#Teachingmaterial" role="tab" aria-controls="contact" aria-selected="false">Teaching material</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="Communication-tab" data-toggle="tab" href="#Communication" role="tab" aria-controls="home" aria-selected="true">Communication</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="CreativeTools-tab" data-toggle="tab" href="#CreativeTools" role="tab" aria-controls="profile" aria-selected="false">Creative tools</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="QuizAndExams-tab" data-toggle="tab" href="#QuizAndExams" role="tab" aria-controls="contact" aria-selected="false">Quiz and exams</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="GDPRAndConsent-tab" data-toggle="tab" href="#GDPRAndConsent" role="tab" aria-controls="contact" aria-selected="false">GDPR and consent</a>
    </li>
    </ul>
    <div class="tab-content" id="myTabContent" style="color: #434343; font-size: .875rem; margin-top: 20px;">
        <div class="tab-pane active" id="introduction" role="tabpanel" aria-labelledby="introduction-tab">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text">The issue with Moodle</p>
                    <p class="card-text">The purpose of the course</p>
                    <p class="card-text">Learn more about Moodle</p>
                    <p class="card-text">Announcements</p>
                    <p class="card-text">Discussion</p>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5674/mod_resource/content/1/Intro.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>           
        </div>
        <div class="tab-pane fade" id="Courseblueprints" role="tabpanel" aria-labelledby="Courseblue-prints">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text">Why use them</p>
                    <p class="card-text">How to use them</p>
                    <p class="card-text" style="margin-bottom: 0;">Provided Blueprint</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Traditional course</li>
                        <li class="card-text">Semester room</li>
                        <li class="card-text">Flipped classroom</li>
                        <li class="card-text">Self-study course</li>
                    </ul>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5675/mod_resource/content/1/Templates%282%29.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
        <div class="tab-pane fade" id="OrganizingMoodle" role="tabpanel" aria-labelledby="OrganizingMoodle">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text" style="margin-bottom: 0;">Course structure</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Overview</li>
                        <li class="card-text">Pros and cons</li>
                        <li class="card-text">How to set up Edit and collapse text, video, and audio</li>
                        <li class="card-text">Text and Media Area</li>
                        <li class="card-text">Summary</li>
                        <li class="card-text">Collapsible button</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Hid content Track and control student progress</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Activity completion</li>
                        <li class="card-text">Access restriction</li>
                    </ul>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5676/mod_resource/content/1/Course%20formats.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
        <div class="tab-pane fade" id="Teachingmaterial" role="tabpanel" aria-labelledby="Teaching material">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text" style="margin-bottom: 0;">Single text file</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">File activity</li>
                        <li class="card-text">PDF embed</li>
                        <li class="card-text">Google Docs</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Folder with files</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Folder activity</li>
                        <li class="card-text">Google folder</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Embed presentation</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">PowerPoint</li>
                        <li class="card-text">Google Slides</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Embed video and audio</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Panopto</li>
                        <li class="card-text">YouTube</li>
                        <li class="card-text">Interactable H5P</li>
                        <li class="card-text">Spodify</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Link to external sources</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">URL (Moodle)</li>
                        <li class="card-text">Website embed</li>
                    </ul>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5677/mod_resource/content/1/Teaching_activities.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
        <div class="tab-pane fade" id="Communication" role="tabpanel" aria-labelledby="Communication">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text" style="margin-bottom: 0;">Teacher to student</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Forum</li>
                        <li class="card-text">Reengagement</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Student to teacher</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Feedback</li>
                        <li class="card-text">SurveyXact</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Student to student</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Peer review</li>
                    </ul>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5678/mod_resource/content/1/Feedback.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
        <div class="tab-pane fade" id="CreativeTools" role="tabpanel" aria-labelledby="Creative Tools">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text">Miro</p>
                    <p class="card-text">Google Edit</p>
                    <p class="card-text">AnswerGarden</p>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5679/mod_resource/content/2/Creative%20tools.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
        <div class="tab-pane fade" id="QuizAndExams" role="tabpanel" aria-labelledby="Quiz And Exams">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text" style="margin-bottom: 0;">Single/group assignment</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Group self-selection</li>
                        <li class="card-text">Assignement</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;">Quizzes in Moodle</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Inspiration</li>
                        <li class="card-text">How quizzes work conceptually</li>
                        <li class="card-text">Question Bank</li>
                        <li class="card-text">Quiz</li>
                        <li class="card-text">JazzQuiz</li>
                    </ul>
                    <p class="card-text" style="margin-bottom: 0;"> Award micro-credential</p>
                    <ul style="margin-bottom: 2px;">
                        <li class="card-text">Intro to micro-credentials</li>
                    </ul>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5680/mod_resource/content/1/Running%20quizzes%281%29.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
        <div class="tab-pane fade" id="GDPRAndConsent" role="tabpanel" aria-labelledby="GDPR And Consent">
            <div id="flex-container" style="display: flex; align-items: start; position: relative; overflow: hidden">
                <div id="tab-text" class="tab-text"> 
                    <p class="card-text">Third-party platforms</p>
                    <p class="card-text">Third-party platforms Guidelines for educators</p>
                    <p class="card-text">Guidelines for students</p>
                    <p class="card-text">Consent form</p>
                </div>
                <img id="dynamic-image" class="img-tab" src="https://hk.moodle.aau.dk/pluginfile.php/5681/mod_resource/content/2/GDPR.png" alt="Card image cap" style="object-fit: scale-down; margin-left: 15px; display: block; max-width: 45%; margin-left: auto;">
            </div>
        </div>
    </div>
</div>
<script>
    // card elemets
    const gridContainer = document.getElementById("gridContainer");
    const cards = document.getElementsByClassName("card");
    const text = document.getElementsByClassName("card-text");
    const cardImages = document.getElementsByClassName("card-img-top");
    // tab elements
    const tab = document.getElementById("tab");
    // Moodle elements to check for visibility
    const courseIndex = document.getElementById('theme_space-drawers-courseindex');
    const rightblockDrawer = document.getElementById('theme_space-drawers-blocks');
    const navDrawer = document.getElementById('nav-drawer');

    // state control
    let courseIndexState = false;
    let rightblockDrawerState = false;
    let navDrawerState = false;
    
    // CSS assingment
    gridContainer.style.cssText = "horizontalpadding: 20px;";
    const cardheight = "400px";
    const imageHeightRatio = 0.25;
    const imageFit = "scale-down";

    //Aply CSS
    changeClassParameters(cards, cardheight, "200px");

    changeClassParametersTab(text, "#434343", ".875rem");

    changeClassParametersImages(cardImages, imageFit, imageHeightRatio, cardheight);

    // Initial call to set styles based on window width
    updateStyles(courseIndexState, rightblockDrawerState, navDrawerState);

    // Function to change CSS class parameters for multiple elements
    function changeClassParameters(elements, height, width) {
        for (let i = 0; i < elements.length; i++) {
            let element = elements[i];
            element.style.height = height;
            element.style.width = width;
            element.style.cssText += "margin-left: 1px; margin-right: 1px; margin-bottom: 2px; flex: 1 0 auto; overflow: scroll; overflow-y:"
        }
    }
    // Function to change CSS class parameters for multiple elements
    function changeClassParametersTab(elements, color, fontSize) {
        for (let i = 0; i < elements.length; i++) {
            let element = elements[i];
            element.style.color = color;
            element.style.fontSize = fontSize;
        }
    }
    // Function to change CSS class parameters for multiple elements
    function changeClassParametersImages(elements, fit, heightRatio, cardheight) {
        const dynamicHeight = parseInt(cardheight, 10) * heightRatio;
        for (let i = 0; i < elements.length; i++) {
            let element = elements[i];
            element.style.height = dynamicHeight + "px";
            element.style.objectFit = fit;
        }
    }
    //Control flex grow for the flex container that holds the cards
    function controlFlexGrow(elements, courseIndexState, rightblockDrawerState, navDrawerState) {
        if (window.outerWidth < 1980  || courseIndexState == true && window.outerWidth < 1980 || rightblockDrawerState == true && window.outerWidth < 1980 || navDrawerState == true && window.outerWidth < 1980|| window.outerWidth < 2234 && courseIndexState == true && outerWidth > 1980 || window.outerWidth < 2234 && rightblockDrawerState == true && outerWidth > 1980 || window.outerWidth < 2234 && navDrawerState == true && outerWidth > 1980) {
            for (let i = 0; i < elements.length; i++) {
                let element = elements[i];
                element.style.cssText += "flex: 0 0 auto;"
            }
        } else if (window.outerWidth >= 1980 && courseIndexState == false && rightblockDrawerState == false && navDrawerState == false || window.outerWidth >= 2234) {
            for (let i = 0; i < elements.length; i++) {
                let element = elements[i];
                element.style.cssText += "flex: 1 0 auto;"
            }
        }
    }
    // Add conditional styles based on window width
    function tabControl(grid, tab, width, courseIndexState, rightblockDrawerState, navDrawerState) {
        if (window.outerWidth < width || window.outerWidth <= 1420 && courseIndexState == true || window.outerWidth <= 1420 && rightblockDrawerState == true | window.outerWidth <= 1420 && navDrawerState == true) {
            grid.style.display = "none";
            tab.style.display = "block";
            return;
        } else if (window.outerWidth >= width && courseIndexState == false && rightblockDrawerState == false && navDrawerState == false || window.outerWidth >= 1420 && courseIndexState == true || window.outerWidth >= 1420 && rightblockDrawerState == true || window.outerWidth >= 1420 && navDrawerState == true) {
            tab.style.display = "none";
            grid.style.display = "block";
        }
    }

    // Function to update styles based on window width
    function updateStyles(courseIndexState, rightblockDrawerState, navDrawerState) {
        let width = '1131';
    
        controlFlexGrow(cards, courseIndexState, rightblockDrawerState, navDrawerState);
        tabControl(gridContainer, tab, width, courseIndexState, rightblockDrawerState, navDrawerState);
    }
    // Function to check if element is visible
    function respondToVisibility(element, callback) {
        var options = {
            root: null, // Use the viewport
            threshold: 0 // Call the callback when the element is completely visible or completely hidden
        };

        var observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                callback(entry.intersectionRatio > 0);
            });
        }, options);

        observer.observe(element);
    }

    // Event listener to update styles on window resize
    //window.addEventListener("resize", updateStyles);
    window.addEventListener("resize", function() {
        updateStyles(courseIndexState, rightblockDrawerState, navDrawerState);
    });
    // Event listener to update styles on window resize based on the Moodle element course index
    respondToVisibility(courseIndex, function(isVisible) {
        courseIndexState = isVisible;
        controlFlexGrow(cards, courseIndexState, rightblockDrawerState, navDrawerState);
        tabControl(gridContainer, tab, width, courseIndexState, rightblockDrawerState, navDrawerState);
    });
    // Event listener to update styles on window resize based on the Moodle element right block drawer
    respondToVisibility(rightblockDrawer, function(isVisible) {
        rightblockDrawerState = isVisible;
        controlFlexGrow(cards, courseIndexState, rightblockDrawerState, navDrawerState);
        tabControl(gridContainer, tab, width, courseIndexState, rightblockDrawerState, navDrawerState);
    });
    // Event listener to update styles on window resize based on the Moodle element nav drawer
    respondToVisibility(navDrawer, function(isVisible) {
        navDrawerState = isVisible;
        controlFlexGrow(cards, courseIndexState, rightblockDrawerState, navDrawerState);
        tabControl(gridContainer, tab, width, courseIndexState, rightblockDrawerState, navDrawerState);
    });
</script>